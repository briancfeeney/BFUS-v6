{#
 # Photos index template
 # -------------------
 #}

{% extends "_layout" %}
{% set title = "Photos" %}

{% block content %}

<div class="photosFlex">
	<div class="galleryWrapper">
		<section class="gallery">
			{% paginate craft.entries.section('photos').limit(16) as entries %}
			{% for entry in entries %}
				{% if entry.photo|length %}
					<article>
					{% for image in entry.photo %}
						<a href="{{ entry.url() }}"><img src="{{ image.getUrl() }}"></a>
					{% endfor %}
					</article>
				{% endif %}
			{% endfor %}
		</section>
	</div>
	<div class="photoNav">
	    {% if paginate.nextUrl %}
	        <a href="{{ paginate.nextUrl }}" class="paging prev">Older</a>
	    {% endif %}
		{% if paginate.prevUrl %}
	        <a href="{{ paginate.prevUrl }}" class="paging next">Newer</a>
	    {% endif %}

		{% endpaginate %}
	</div>
</div>
	
	<script src="../public/js/jquery.masonry.min.js"></script>
	<script>

		var $container = $('.gallery');
		// initialize Masonry after all images have loaded  
		$container.imagesLoaded( function() {
		  $container.masonry(	{
			  itemSelector: 'article'
			});
		});
		
		$( window ).ready(function() {
		  	var $container = $('.gallery');
			// initialize
			$container.masonry({
			  itemSelector: 'article'
			});
		});

		$( window ).resize(function() {
		  	var $container = $('.gallery');
			// initialize
			$container.masonry({
			  itemSelector: 'article'
			});
		});
		
		(function($) {

		    var resizeTimer; // Set resizeTimer to empty so it resets on page load

		    function resizeFunction() {
		        // Stuff that should happen on resize
		    };

		    // On resize, run the function and reset the timeout
		    // 250 is the delay in milliseconds. Change as you see fit.
		    $(window).resize(function() {
		        clearTimeout(resizeTimer);
		        resizeTimer = setTimeout(resizeFunction, 250);
		    });

		    resizeFunction();

		})(jQuery);

	</script>


{% endblock %}
