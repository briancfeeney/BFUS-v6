{#
 # Homepage template
 # ---------------
 #
 # When this template gets loaded, it will be because someone has accessed
 # http://yoursite.com/ (without any URI). Craft checks to see if you have
 # a Single section set to be the Homepage (as you do, by default), and
 # loads the section’s Template (this file). A special ‘entry’ variable
 # will already be set for you, assigned to the Homepage entry.
 #
 # It's worth noting that even if you didn't have a Homepage Single section,
 # as long as this template remains at craft/templates/index.html, it
 # would still be the one to get loaded when accessing http://yoursite.com/,
 # albeit without an ‘entry’ variable already set for you.
 #
 # See this page for more details on how Craft routes requests:
 # http://buildwithcraft.com/docs/routing
 #}

{% extends "_layout" %}

{% block content %}

{% set bgImage = image.getUrl() %}

{% if entry.backgroundImage | length %}
	{% for background in entry.backgroundImage.limit(1).order('RAND()') %}
		{% for image in background.photo.limit(1) %}
			  {% set bgImage = image.getUrl() %}
		{% endfor %}
	{% endfor %}
{% endif %}

<style>
	#bgImage {
		background: url("{{ bgImage }}") no-repeat center center;
		background-size: cover;
	}
</style>

<section id="bgImage"></section>

<section id="introText">
	
	<p>Designer and developer. Employed by the Brooklyn Museum. Writer, photographer, illustrator, person. Hi.</p>
</section>

<section id="landingAbout">
	<article class="thebrooklynmuseum" style="background: rgb(0,174,239)">
		<div class="visuals">
			<img src="/public/images/bkm-logo-white.png">
		</div>
		<div class="workMeta">
			<h6>Web Designer (staff)</h6>
			<h6>January 2014 to Present</h6>
			<h1>Brooklyn Museum</h1>
		</div>
	</article>
	{% set allEntries = craft.entries.section('work').limit(null) %}
	{% for date, entries in allEntries | group("postDate|date('Y')") %}
	        {% for entry in entries %}
				<article class="{{ entry.type }}" style="background: #{{ entry.color }};">
					<div class="visuals">
						<a href="{{ entry.url() }}">
						{% for image in entry.portfolioImages.limit(1) %}
							{% if entry.type == 'webDesign' %}
								<div class="workImage" style="background:url({{ image.getUrl() }});"></div>
							{% else %}
								<img src="{{ image.getUrl() }}">
							{% endif %}
						{% endfor %}
						</a>
					</div>
					<div class="workMeta">
						<h6>{{ entry.type.name }}</h6>
						<!-- <h4>{{ entry.postDate.format('F Y') }}</h4> -->
						<a href="{{ entry.url() }}">
							<h1>{{ entry.title }}</h1>
						</a>
					</div>
				</article>
	        {% endfor %}
	{% endfor %}
		
</section>

{% endblock %}
